(function(){var e,t,r,n,a,i,s,o,u,c,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=function(e,t){return function(){return e.apply(t,arguments)}};this.app=null!=(u=window.app)?u:{},this.app.Languages={},n=function(){function e(e,t){var r,n,a;this.name=e,null==t&&(t={}),this.template=null!=(r=t.template)?r:this.name.toLowerCase(),this.prism=null!=(n=t.prism)?n:this.name.toLowerCase(),this.types=null!=(a=t.types)?a:{"default":"string"},app.Languages[this.name]=this}return e.prototype.renderInterface=function(e){return e.nameForType=function(e){return function(t){var r;return null!=(r=e.types[t])?r:"N/A"}}(this),ecoTemplates[this.template](e)},e}(),i=function(){function e(e){this.name=e,this.memberList={},this.methods=[],this.properties=[]}return e.prototype.addMethod=function(e){return this.memberList["m$"+e]?void 0:(this.methods.push({name:e}),this.memberList["m$"+e]=!0)},e.prototype.addProperty=function(e){var t,r,n,a;return a=e.split(":"),t=a[0],n=null!=(r=a[1])?r:"default","?"===e.substr(e.length-1)&&(t=e.substring(0,e.length-1),n="boolean"),e.match(/\[\]$/)&&(t=e.substring(0,e.length-2),n="array"),e.match(/\{\}$/)&&(t=e.substring(0,e.length-2),n="dictionary"),this.memberList["p$"+t]?void 0:(this.properties.push({name:t,type:n}),this.memberList["p$"+t]=!0)},e.prototype.clone=function(){var t,r,n,a,i,s,o,u,c;for(t=new e(this.name),u=this.methods,r=0,a=u.length;a>r;r++)s=u[r],t.addMethod(s.name);for(c=this.properties,n=0,i=c.length;i>n;n++)o=c[n],t.addProperty(o.name+":"+o.type);return t},e}(),e=function(e){function t(){t.__super__.constructor.call(this,"CoffeeScript",{template:"coffee"})}return d(t,e),t}(n),new e,o=function(e){function t(){t.__super__.constructor.call(this,"XML",{prism:"markup",types:{"default":"string","boolean":"boolean",string:"string",integer:"integer","double":"double",array:"array",dictionary:"dictionary"}})}return d(t,e),t}(n),new o,r=function(e){function t(){t.__super__.constructor.call(this,"JavaScript",{types:{"default":'""',"boolean":"null",string:'""',integer:"0","double":"0.0",array:"[ ]",dictionary:"{ }"}})}return d(t,e),t}(n),new r,s=function(e){function t(){t.__super__.constructor.call(this,"Swift",{types:{"default":"String","boolean":"Bool",string:"String",integer:"Int","double":"Double",array:"[ String ]",dictionary:"[ String: String ]"}})}return d(t,e),t}(n),new s,t=function(e){function t(){t.__super__.constructor.call(this,"Diagram")}return d(t,e),t}(n),new t,window.$=function(e){var t;return t=document.querySelectorAll(e),1===t.length?t[0]:t},window.$val=function(e){var t,r,n,a;for(t=$("[name='"+e+"']"),r=0,n=t.length;n>r;r++)if(a=t[r],a.checked)return a.value},this.app=null!=(c=window.app)?c:{},a=function(){function e(){this.handleKeypress=h(this.handleKeypress,this),this.saveCurrentObjectToLibrary=h(this.saveCurrentObjectToLibrary,this),this.addMethod=h(this.addMethod,this),this.addProperty=h(this.addProperty,this),this.setObjectName=h(this.setObjectName,this),this.currentObject=new i,this.library=[],this.addLanguagesToForm(),this.assignHandlers(),this.setFocusAndPickDefaultLanguage()}var t,r;return t=13,r=/^[^\s,\.()-]+$/,e.prototype.assignHandlers=function(){var e,t,r,n,a,i,s,o,u;for($("#name").addEventListener("change",this.setObjectName,!1),$("#property").addEventListener("change",this.addProperty,!1),$("#method").addEventListener("change",this.addMethod,!1),i=$("[name='codelang']"),e=0,r=i.length;r>e;e++)a=i[e],a.addEventListener("change",function(e){return function(){return e.changed()}}(this),!1);for($("#name").addEventListener("keypress",this.handleKeypress,!1),$("#property").addEventListener("keypress",this.handleKeypress,!1),$("#method").addEventListener("keypress",this.handleKeypress,!1),$("#save").addEventListener("click",this.saveCurrentObjectToLibrary,!1),s=$('input[type="text"]'),o=[],t=0,n=s.length;n>t;t++)u=s[t],o.push(u.addEventListener("keyup",this.validityChecker,!1));return o},e.prototype.validityChecker=function(e){var t,n;return t=e.target,0===t.value.length?t.classList.remove("invalid"):(n=r.test(t.value),t.classList.toggle("invalid",!n))},e.prototype.setObjectName=function(e){var t;return t=e.target.value,"tester"===t?this.testObject():(this.currentObject.name=t,this.changed())},e.prototype.addProperty=function(e){var t;return t=e.target.value,this.currentObject.addProperty(t),this.changed()},e.prototype.addMethod=function(e){var t;return t=e.target.value,this.currentObject.addMethod(t),this.changed()},e.prototype.reset=function(){return this.currentObject=new i,this.changed(),this.resetForm()},e.prototype.addLanguagesToForm=function(){var e,t,r,n;return e=0,n=function(){var n,a;n=app.Languages,a=[];for(r in n)t=n[r],"Diagram"!==r?a.push('<p class="radiofield"><input type="radio" value="'+r+'" name="codelang" id="codelang-'+ ++e+'"><label for="codelang-'+e+'">'+r+"</label></p>"):a.push(void 0);return a}(),$(".language").innerHTML+=n.join("\n")},e.prototype.saveCurrentObjectToLibrary=function(e){return e.preventDefault(),this.library.push(this.currentObject.clone()),this.renderLibrary(),this.reset()},e.prototype.resetForm=function(){return $("#name").value="",$("#property").value="",$("#method").value="",$("#name").focus()},e.prototype.testObject=function(){return this.currentObject=new i("ObjectDescriptor"),this.currentObject.addMethod("addMethod"),this.currentObject.addMethod("addProperty"),this.currentObject.addMethod("clone"),this.currentObject.addProperty("memberlist{}"),this.currentObject.addProperty("methods[]"),this.currentObject.addProperty("properties[]"),this.changed()},e.prototype.renderCode=function(e,t){var r,n,a;return a=app.Languages[t],n=a.renderInterface(e),r=$(".output code"),r.innerText=n,r.className="language-"+a.prism},e.prototype.renderObject=function(e){var t,r,n;return n=app.Languages.Diagram,t=n.renderInterface(e),r=$(".diagram"),r.innerHTML=t},e.prototype.renderLibrary=function(){var e,t,r,n,a;for($(".library").innerHTML="",n=this.library,a=[],e=0,t=n.length;t>e;e++)r=n[e],a.push(this.renderSavedObject(r));return a},e.prototype.renderSavedObject=function(e){var t,r,n,a;return r=app.Languages.Diagram,t=r.renderInterface(e),a=$(".library"),n=document.createElement("div"),n.classList.add("diagram-saved"),n.innerHTML=t,a.appendChild(n)},e.prototype.changed=function(){var e;return e=$val("codelang"),this.renderObject(this.currentObject),this.renderCode(this.currentObject,e),Prism.highlightAll()},e.prototype.handleKeypress=function(e){var r,n;return n=e.target,r=e.keyCode,r===t?"name"===n.id?$("#property").select():n.select():void 0},e.prototype.setFocusAndPickDefaultLanguage=function(){return $("#codelang-1").checked=!0,$("#name").focus(),$("#name").select(),this.changed()},e}(),app.controller=new a}).call(this);