(function(){var t,e,n,r,a,o,i,s,c,u,p=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty,h=function(t,e){return function(){return t.apply(e,arguments)}};this.app=null!=(c=window.app)?c:{},this.app.Languages={},r=function(){function t(t,e){var n,r;this.name=t,null==e&&(e={}),this.template=null!=(n=e.template)?n:this.name.toLowerCase(),this.prism=null!=(r=e.prism)?r:this.name.toLowerCase(),app.Languages[this.name]=this}return t.prototype.renderInterface=function(t){return ecoTemplates[this.template](t)},t}(),o=function(){function t(t){this.name=t,this.methods=[],this.properties=[]}var e;return e={},t.prototype.addMethod=function(t){return e["m$"+t]?void 0:(this.methods.push({name:t}),e["m$"+t]=!0)},t.prototype.addProperty=function(t){return e["p$"+t]?void 0:(this.properties.push({name:t}),e["p$"+t]=!0)},t}(),t=function(t){function e(){e.__super__.constructor.call(this,"CoffeeScript",{template:"coffee"})}return p(e,t),e}(r),new t,s=function(t){function e(){e.__super__.constructor.call(this,"XML",{prism:"markup"})}return p(e,t),e}(r),new s,n=function(t){function e(){e.__super__.constructor.call(this,"JavaScript")}return p(e,t),e}(r),new n,i=function(t){function e(){e.__super__.constructor.call(this,"Swift",{template:"swift",prism:"swift"})}return p(e,t),e}(r),new i,e=function(t){function e(){e.__super__.constructor.call(this,"Diagram")}return p(e,t),e}(r),new e,window.$=function(t){var e;return e=document.querySelectorAll(t),1===e.length?e[0]:e},window.$val=function(t){var e,n,r,a;for(e=$("[name='"+t+"']"),n=0,r=e.length;r>n;n++)if(a=e[n],a.checked)return a.value},this.app=null!=(u=window.app)?u:{},a=function(){function t(){this.handleKeypress=h(this.handleKeypress,this),this.addMethod=h(this.addMethod,this),this.addProperty=h(this.addProperty,this),this.setObjectName=h(this.setObjectName,this),this.currentObject=new o,this.addLanguagesToForm(),this.assignHandlers(),this.setFocusAndPickDefaultLanguage()}var e;return e=13,t.prototype.assignHandlers=function(){var t,e,n,r;for($("#name").addEventListener("change",this.setObjectName,!1),$("#property").addEventListener("change",this.addProperty,!1),$("#method").addEventListener("change",this.addMethod,!1),r=$("[name='codelang']"),t=0,e=r.length;e>t;t++)n=r[t],n.addEventListener("change",function(t){return function(){return t.changed()}}(this),!1);return $("#property").addEventListener("keypress",this.handleKeypress,!1),$("#method").addEventListener("keypress",this.handleKeypress,!1)},t.prototype.setObjectName=function(t){var e;return e=t.target.value,"tester"===e?this.testObject():(this.currentObject.name=e,this.changed())},t.prototype.addProperty=function(t){var e;return e=t.target.value,this.currentObject.addProperty(e),this.changed()},t.prototype.addMethod=function(t){var e;return e=t.target.value,this.currentObject.addMethod(e),this.changed()},t.prototype.addLanguagesToForm=function(){var t,e,n,r;return t=0,r=function(){var r,a;r=app.Languages,a=[];for(n in r)e=r[n],"Diagram"!==n?a.push('<p class="radiofield"><input type="radio" value="'+n+'" name="codelang" id="codelang-'+ ++t+'"><label for="codelang-'+t+'">'+n+"</label></p>"):a.push(void 0);return a}(),$(".language").innerHTML+=r.join("\n")},t.prototype.testObject=function(){return this.currentObject=new o("Language"),this.currentObject.addMethod("renderInterface"),this.currentObject.addMethod("renderHTML"),this.currentObject.addProperty("name"),this.currentObject.addProperty("title"),this.changed()},t.prototype.renderCode=function(t,e){var n,r,a;return a=app.Languages[e],r=a.renderInterface(t),n=$(".output code"),n.innerText=r,n.className="language-"+a.prism},t.prototype.renderObject=function(t){var e,n,r;return r=app.Languages.Diagram,e=r.renderInterface(t),n=$(".diagram"),n.innerHTML=e},t.prototype.changed=function(){var t;return t=$val("codelang"),this.renderObject(this.currentObject),this.renderCode(this.currentObject,t),Prism.highlightAll()},t.prototype.handleKeypress=function(t){var n,r;return r=t.target,n=t.keyCode,n===e?r.select():void 0},t.prototype.setFocusAndPickDefaultLanguage=function(){return $("#codelang-1").checked=!0,$("#name").focus(),$("#name").select(),this.changed()},t}(),app.controller=new a}).call(this);