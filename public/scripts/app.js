(function(){var e,t,n,r,a,i,o,s,u,c,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=function(e,t){return function(){return e.apply(t,arguments)}};this.app=null!=(u=window.app)?u:{},this.app.Languages={},r=function(){function e(e,t){var n,r;this.name=e,null==t&&(t={}),this.template=null!=(n=t.template)?n:this.name.toLowerCase(),this.prism=null!=(r=t.prism)?r:this.name.toLowerCase(),app.Languages[this.name]=this}return e.prototype.renderInterface=function(e){return ecoTemplates[this.template](e)},e}(),i=function(){function e(e){this.name=e,this.methods=[],this.properties=[]}var t;return t={},e.prototype.addMethod=function(e){return t["m$"+e]?void 0:(this.methods.push({name:e}),t["m$"+e]=!0)},e.prototype.addProperty=function(e){var n,r,a,i;return i=e.split(":"),n=i[0],a=null!=(r=i[1])?r:"default",e.match(/\[\]$/)&&(n=e.substring(0,e.length-2),a="array"),t["p$"+n]?void 0:(this.properties.push({name:n,type:a}),t["p$"+n]=!0)},e}(),e=function(e){function t(){t.__super__.constructor.call(this,"CoffeeScript",{template:"coffee"})}return d(t,e),t}(r),new e,s=function(e){function t(){t.__super__.constructor.call(this,"XML",{prism:"markup"})}return d(t,e),t}(r),new s,n=function(e){function t(){t.__super__.constructor.call(this,"JavaScript")}return d(t,e),t}(r),new n,o=function(e){function t(){t.__super__.constructor.call(this,"Swift",{template:"swift",prism:"swift"})}return d(t,e),t}(r),new o,t=function(e){function t(){t.__super__.constructor.call(this,"Diagram")}return d(t,e),t}(r),new t,window.$=function(e){var t;return t=document.querySelectorAll(e),1===t.length?t[0]:t},window.$val=function(e){var t,n,r,a;for(t=$("[name='"+e+"']"),n=0,r=t.length;r>n;n++)if(a=t[n],a.checked)return a.value},this.app=null!=(c=window.app)?c:{},a=function(){function e(){this.handleKeypress=h(this.handleKeypress,this),this.addMethod=h(this.addMethod,this),this.addProperty=h(this.addProperty,this),this.setObjectName=h(this.setObjectName,this),this.currentObject=new i,this.addLanguagesToForm(),this.assignHandlers(),this.setFocusAndPickDefaultLanguage()}var t,n;return t=13,n=/^[^\s,\.()-]+$/,e.prototype.assignHandlers=function(){var e,t,n,r,a,i,o,s,u;for($("#name").addEventListener("change",this.setObjectName,!1),$("#property").addEventListener("change",this.addProperty,!1),$("#method").addEventListener("change",this.addMethod,!1),i=$("[name='codelang']"),e=0,n=i.length;n>e;e++)a=i[e],a.addEventListener("change",function(e){return function(){return e.changed()}}(this),!1);for($("#property").addEventListener("keypress",this.handleKeypress,!1),$("#method").addEventListener("keypress",this.handleKeypress,!1),o=$('input[type="text"]'),s=[],t=0,r=o.length;r>t;t++)u=o[t],s.push(u.addEventListener("keyup",this.validityChecker,!1));return s},e.prototype.validityChecker=function(e){var t,r;return t=e.target,0===t.value.length?t.classList.remove("invalid"):(r=n.test(t.value),t.classList.toggle("invalid",!r))},e.prototype.setObjectName=function(e){var t;return t=e.target.value,"tester"===t?this.testObject():(this.currentObject.name=t,this.changed())},e.prototype.addProperty=function(e){var t;return t=e.target.value,this.currentObject.addProperty(t),this.changed()},e.prototype.addMethod=function(e){var t;return t=e.target.value,this.currentObject.addMethod(t),this.changed()},e.prototype.addLanguagesToForm=function(){var e,t,n,r;return e=0,r=function(){var r,a;r=app.Languages,a=[];for(n in r)t=r[n],"Diagram"!==n?a.push('<p class="radiofield"><input type="radio" value="'+n+'" name="codelang" id="codelang-'+ ++e+'"><label for="codelang-'+e+'">'+n+"</label></p>"):a.push(void 0);return a}(),$(".language").innerHTML+=r.join("\n")},e.prototype.testObject=function(){return this.currentObject=new i("Language"),this.currentObject.addMethod("renderInterface"),this.currentObject.addMethod("renderHTML"),this.currentObject.addProperty("name"),this.currentObject.addProperty("title"),this.changed()},e.prototype.renderCode=function(e,t){var n,r,a;return a=app.Languages[t],r=a.renderInterface(e),n=$(".output code"),n.innerText=r,n.className="language-"+a.prism},e.prototype.renderObject=function(e){var t,n,r;return r=app.Languages.Diagram,t=r.renderInterface(e),n=$(".diagram"),n.innerHTML=t},e.prototype.renderSavedObject=function(e){var t,n,r,a;return n=app.Languages.Diagram,t=n.renderInterface(e),a=$(".library"),r=document.createElement("div"),r.classList.add("diagram-saved"),r.innerHTML=t,a.appendChild(r)},e.prototype.changed=function(){var e;return e=$val("codelang"),this.renderObject(this.currentObject),this.renderCode(this.currentObject,e),Prism.highlightAll()},e.prototype.handleKeypress=function(e){var n,r;return r=e.target,n=e.keyCode,n===t?r.select():void 0},e.prototype.setFocusAndPickDefaultLanguage=function(){return $("#codelang-1").checked=!0,$("#name").focus(),$("#name").select(),this.changed()},e}(),app.controller=new a}).call(this);
//# sourceMappingURL=./app.js.map